{"version":3,"sources":["./src/app/layout/reports/opening-report/opening-report-routing.module.ts","./src/app/layout/reports/opening-report/opening-report.component.html","./src/app/layout/reports/opening-report/opening-report.component.scss","./src/app/layout/reports/opening-report/opening-report.component.ts","./src/app/layout/reports/opening-report/opening-report.module.ts"],"names":[],"mappings":"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","file":"opening-report.module.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { OpeningReportComponent } from './opening-report.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OpeningReportComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class OpeningReportRoutingModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/layout/reports/opening-report/opening-report-routing.module.ts","module.exports = \"<div class=\\\"container-fluid tfm-panel\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-2 tfm-panel-left\\\">\\r\\n      <div class=\\\"tfm-panel-container\\\">\\r\\n        <div class=\\\"tfm-panel-header jqx-widget-header jqx-window-header jqx-widget-header-energyblue\\\">\\r\\n          <h2> Quick Access </h2>\\r\\n        </div>\\r\\n        <jqxPanel [width]=\\\"'99.7%'\\\" [height]=\\\"'94.2%'\\\">\\r\\n          <ng-template #quickAccess></ng-template>\\r\\n        </jqxPanel>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col-md-10 tfm-panel-right\\\">\\r\\n      <div class=\\\"tfm-panel-container\\\">\\r\\n        <div class=\\\"tfm-panel-header jqx-widget-header jqx-window-header jqx-widget-header-energyblue\\\">\\r\\n          <h2>Opening Report</h2>\\r\\n        </div>\\r\\n        <div class=\\\"report-filter\\\" style=\\\"padding: 10px;\\\">\\r\\n          <table>\\r\\n            <tr>\\r\\n              <td>\\r\\n                Select a store item\\r\\n              </td>\\r\\n              <td>\\r\\n                <jqxComboBox #sComboBox (onChange)=\\\"getOpeningId($event)\\\" class=\\\"store_id\\\" [width]=\\\"185\\\" [theme]=\\\"'energyblue'\\\" [height]=\\\"23\\\"\\r\\n                  [placeHolder]=\\\"'Select item'\\\" [dropDownHeight]=\\\"100\\\" [source]=\\\"storeAdapter\\\" [displayMember]=\\\"'name'\\\" [valueMember]=\\\"'id'\\\"\\r\\n                  [searchMode]=\\\"'containsignorecase'\\\">\\r\\n                </jqxComboBox>\\r\\n              </td>\\r\\n              <td>\\r\\n                <jqxButton style=\\\"margin-right: 5px;\\\" (onClick)=\\\"generateReport(false)\\\">\\r\\n                  View Report\\r\\n                </jqxButton>\\r\\n              </td>\\r\\n              <td>\\r\\n                <jqxButton *ngIf=\\\"showGenerateReportButton\\\" style=\\\"margin-right: 5px;\\\" (onClick)=\\\"generateReport(true)\\\">\\r\\n                  Generate Report\\r\\n                </jqxButton>\\r\\n              </td>\\r\\n            </tr>\\r\\n          </table>\\r\\n          <br>\\r\\n          <br>\\r\\n          <!-- <h5 style=\\\"text-align: center;\\\" *ngIf=\\\"reportData.length == 0\\\">Data not found!</h5> -->\\r\\n          <div style=\\\"height: 525px; width: 100%;overflow-y: auto\\\">\\r\\n            <table *ngIf=\\\"showGenerateReportButton && reportData.length\\\" border=\\\"1\\\" style=\\\"text-align: center;width: 100%\\\">\\r\\n              <tr style=\\\"font-weight: 700;background: #d6d8d2;height: 35px;\\\">\\r\\n                <td>Type</td>\\r\\n                <td>Item</td>\\r\\n                <td>Qty</td>\\r\\n                <td>Rate</td>\\r\\n                <td>Amt</td>\\r\\n              </tr>\\r\\n              <tr *ngFor=\\\"let report of reportData\\\">\\r\\n                <td style=\\\"font-weight: 600;\\\">{{report.category}}</td>\\r\\n                <td>{{report.itemName}}</td>\\r\\n                <td>{{report.quantity ? report.quantity : 0}}</td>\\r\\n                <td>{{report.rate ? report.rate : 0}}</td>\\r\\n                <td>{{report.amount ? report.amount : 0}}</td>\\r\\n              </tr>\\r\\n            </table>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<jqxLoader #jqxLoader [imagePosition]=\\\"'top'\\\" [width]=\\\"100\\\" [height]=\\\"60\\\">\\r\\n</jqxLoader>\\r\\n<jqxNotification #winNotification [width]=\\\"250\\\" [position]=\\\"'top-right'\\\" [opacity]=\\\"0.9\\\" [autoOpen]=\\\"false\\\" [autoClose]=\\\"false\\\"\\r\\n  [animationOpenDelay]=\\\"800\\\" [theme]=\\\"'energyblue'\\\" [template]=\\\"'error'\\\">\\r\\n  <div id='windowMessage'></div>\\r\\n</jqxNotification>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/layout/reports/opening-report/opening-report.component.html\n// module id = ./src/app/layout/reports/opening-report/opening-report.component.html\n// module chunks = opening-report.module","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/layout/reports/opening-report/opening-report.component.scss\n// module id = ./src/app/layout/reports/opening-report/opening-report.component.scss\n// module chunks = opening-report.module","import { Component, OnInit, ViewChild, ViewContainerRef, ComponentFactoryResolver, Inject } from '@angular/core';\r\nimport { QuickaccessComponent, CurrentUserService, AllReportService, FileExportService } from '../../../shared';\r\nimport { jqxComboBoxComponent } from 'jqwidgets-framework/jqwidgets-ts/angular_jqxcombobox';\r\nimport { jqxLoaderComponent } from 'jqwidgets-framework/jqwidgets-ts/angular_jqxloader';\r\nimport { jqxNotificationComponent } from 'jqwidgets-framework/jqwidgets-ts/angular_jqxnotification';\r\n\r\n@Component({\r\n  selector: 'app-opening-report',\r\n  templateUrl: './opening-report.component.html',\r\n  styleUrls: ['./opening-report.component.scss']\r\n})\r\nexport class OpeningReportComponent implements OnInit {\r\n\r\n  @ViewChild('quickAccess', { read: ViewContainerRef }) quickAccess: ViewContainerRef;\r\n  @ViewChild('sComboBox') sComboBox: jqxComboBoxComponent;\r\n  @ViewChild('jqxLoader') jqxLoader: jqxLoaderComponent;\r\n  @ViewChild('winNotification') winNotification: jqxNotificationComponent;\r\n  storeAdapter: any;\r\n  store_data: any;\r\n  userData: any = {};\r\n  openingId: any;\r\n  apiUrl: string;\r\n  reportData: any = [];\r\n  categoryName: string;\r\n  showGenerateReportButton: boolean = false;\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private cus: CurrentUserService,\r\n    private rs: AllReportService,\r\n    private fes: FileExportService,\r\n    @Inject('API_URL') apiUrl: string,\r\n  ) {\r\n    this.userData['token'] = this.cus.getTokenData()['token'];\r\n    this.apiUrl = apiUrl;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.createQuickAccess();\r\n    this.store_data =\r\n      {\r\n        datatype: \"json\",\r\n        contentType: \"application/json; charset=utf-8\",\r\n        datafields: [\r\n          { name: 'id' },\r\n          { name: 'name' },\r\n        ],\r\n        data: this.userData,\r\n        url: this.apiUrl + 'store?limit=all',\r\n      };\r\n    this.storeAdapter = new jqx.dataAdapter(this.store_data, {\r\n      downloadComplete: (data, status, xhr) => {\r\n        let tData = [];\r\n        let dt = { };\r\n        dt['id'] = '0';\r\n        dt['name'] = 'Select All';\r\n        tData.push(dt);\r\n        for(let i=0; i<data.data.length; i++){\r\n          tData.push(data.data[i]);\r\n        }\r\n        return tData;\r\n      }\r\n    });\r\n  }\r\n\r\n  createQuickAccess() {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(QuickaccessComponent);\r\n    this.quickAccess.clear();\r\n    const dyynamicComponent = this.quickAccess.createComponent(componentFactory);\r\n  }\r\n\r\n  getOpeningId($event) {\r\n    this.openingId = $event.args.item.originalItem.id;\r\n  }\r\n\r\n  generateReport(generate: boolean) {\r\n    console.log(this.sComboBox.val());\r\n    if (this.sComboBox.val()) {\r\n      if (!generate) {\r\n        this.showGenerateReportButton = true;\r\n      }\r\n      let post: any = [];\r\n\r\n      if (this.openingId) {\r\n        post['store_id'] = this.openingId;\r\n      }\r\n      post['opening_report'] = true;\r\n      if (generate) {\r\n        post['opening_report_generate'] = true;\r\n      }\r\n      this.jqxLoader.open();\r\n\r\n      this.rs.getStoreLedgerReport(post, true ? generate : false).subscribe(\r\n        (result: any) => {\r\n          this.jqxLoader.close();\r\n          if (generate) {\r\n            this.fes.SaveFile(result, 'Opening Report');\r\n          } else {\r\n            this.reportData = [];\r\n            let itemCount = 0;\r\n            let openingCount = 0;\r\n            result.category.forEach(resultCategory => {\r\n              result.items[itemCount].forEach(resultItems => {\r\n                result.opening[openingCount].forEach(openingItems => {\r\n                  let data = {\r\n                    category: this.categoryName != resultCategory.name ? resultCategory.name : null,\r\n                    itemName: resultItems.name,\r\n                    quantity: openingItems.quantity,\r\n                    rate: (openingItems.total / openingItems.quantity).toFixed(2),\r\n                    amount: openingItems.total\r\n                  }\r\n                  this.reportData.push(data);\r\n                  this.categoryName = resultCategory.name;\r\n                })\r\n                openingCount++;\r\n              })\r\n              itemCount++;\r\n            })\r\n          }\r\n        }, error => {\r\n          console.log(error);\r\n          this.jqxLoader.close();\r\n        }\r\n      )\r\n    } else {\r\n      let messageDiv: any = document.getElementById('windowMessage');\r\n      messageDiv.innerText = \"Please select an item\"\r\n      this.winNotification.open();\r\n      this.jqxLoader.close();\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/layout/reports/opening-report/opening-report.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { OpeningReportRoutingModule } from './opening-report-routing.module';\r\nimport { OpeningReportComponent } from './opening-report.component';\r\nimport { SharedModule } from '../../../shared/modules/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    OpeningReportRoutingModule\r\n  ],\r\n  declarations: [OpeningReportComponent]\r\n})\r\nexport class OpeningReportModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/layout/reports/opening-report/opening-report.module.ts"],"sourceRoot":"webpack:///"}